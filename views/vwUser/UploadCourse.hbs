{{#section 'css'}}
<style>
    .upload-wrapper {
        max-width: 1140px;
    }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.1.3/css/fileinput.min.css">
{{/section}}

{{#section 'js'}}


<script src='https://cdn.tiny.cloud/1/6a2wdzaqh764emfqjwf4g5s2kr8ajq1vbfrcipng9eu1o2il/tinymce/5/tinymce.min.js'
    referrerpolicy="origin"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.1.3/js/fileinput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.1.3/themes/explorer-fa/theme.min.js"
    integrity="sha512-hg/NmpjshDPjmZAAGr5j6UlcV1GotL1IBbFH96Q2fFGkr/OaMwAuZTl5j6swzyxUU3eihRUhRWn0rASVuyXGxw=="
    crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.1.3/themes/fa/theme.min.js"
    integrity="sha512-eur4+EF8SPJo3fhe8mMkdSwopFRsMtCU2NvPm8aKjxWFs3/9naJn5HbYi+KPGwAinR5xYzz0/njHcGzifM9KCg=="
    crossorigin="anonymous"></script>
<script type="module">
    import { openAlert } from "/utils/alertModal.js"

    tinymce.init({
        selector: '#txtFullDes',
        height: 200,
        plugins: "paste image link autolink lists table media",
        menubar: false,
        toolbar: ['undo redo| bold italic underline strikethrough | numlist bullist | alignleft aligncenter alignright | forecolor backcolor | table link image media']
    });

    tinymce.init({
        selector: '#txtSyllabus',
        height: 200,
        plugins: "paste image link autolink lists table media",
        menubar: false,
        toolbar: ['undo redo| bold italic underline strikethrough | numlist bullist | alignleft aligncenter alignright | forecolor backcolor | table link image media']

    })

    $("#ulAva").fileinput({
        theme: 'fa',
        dropZoneEnabled: false,
        allowedFileExtensions: ['png', 'jpg', 'gif']
    })


    function uploadCourse() {
        const fmUpload = $("#fmUpload");

        const courseName = $("#courseName");
        const txtShortDes = $("#txtShortDes");
        const txtFullDes = $("#txtFullDes");
        const txtCoursePrice = $("#txtCoursePrice");
        const txtCourseDiscount = $("#txtCourseDiscount");
        const txtSyllabus = $("#txtSyllabus");

        fmUpload.on("submit", e => {

            const data = {
                courseName: courseName.val(),
                txtShortDes: txtShortDes.val(),
                txtFullDes: txtFullDes.val(),
                txtCoursePrice: txtCoursePrice.val(),
                txtCourseDiscount: txtCourseDiscount.val(),
                txtSyllabus: txtSyllabus.val(),
            }
            $.ajax({
                type: "post",
                url: `/user/upload-course`,
                data: data,
                xhrFields: {
                    withCredentials: false
                },
                headers: {

                },
                success: data => {
                    //  console.log('Success');
                    console.log(data)
                    const messageTrigger = {
                        timer: 1500,
                        html: '',
                        icon: 'success',
                        title: "Register Success!"
                    }


                    openAlert(messageTrigger)


                },
                error: er => {
                    const messageTrigger = {
                        timer: 2500,
                        html: '',
                        icon: 'error',
                        title: er.responseJSON.message,
                    }
                    openAlert(messageTrigger)
                }

            })
        })
    }
    uploadCourse();
</script>

{{/section}}

<div class="container-fluid my-4 upload-wrapper">
    <form action="" method="POST" id="fmUpload" enctype="multipart/form-data">
        <div class="card">
            <div class="card-header">
                <h4 class="card-text font-weight-bold ">What You See Is What You Get Editor</h4>

            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="ulAva" class="font-weight-bold">Course Avatar </label>
                    <input id="ulAva" name="ulAva" type="file" class="file" data-browse-on-zone-click="true">
                </div>
                <div class="form-group">
                    <label for="crouseName" class="font-weight-bold">Course Name</label>
                    <input type="text" name="courseName" id="courseName" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="txtShortDes" class="font-weight-bold">Course Short Description</label>
                    <input type="text" name="txtShortDes" id="txtShortDes" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="txtFullDes" class="font-weight-bold">Full Description</label>
                    <textarea class="form-control" name="txtFullDes" id="txtFullDes" cols="30" rows="10"></textarea>
                </div>

                <div class="form-group">
                    <label for="txtCoursePrice" class="font-weight-bold">Course Price</label>
                    <input type="text" name="txtCoursePrice" id="txtCoursePrice" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="txtCourseDiscount" class="font-weight-bold">Course Discount</label>
                    <input type="text" name="txtCourseDiscount" id="txtCourseDiscount" class="form-control" />
                </div>

                <div class="form-group">
                    <label for="txtSyllabus" class="font-weight-bold">Course Syllabus</label>
                    <textarea class="form-control" name="txtSyllabus" id="txtSyllabus" cols="30" rows="10"></textarea>
                </div>
            </div>
            <div class="card-footer ">

                <button class="btn btn-primary" type="submit">
                    <i class="fa fa-upload mr-2"></i>Upload
                </button>

            </div>
        </div>
    </form>
</div>